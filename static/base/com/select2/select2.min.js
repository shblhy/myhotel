;(function($){if(typeof $.fn.each2=="undefined")$.fn.extend({each2:function(_){var B=$([0]),C=-1,A=this.length;while(++C<A&&(B.context=B[0]=this[C])&&_.call(B[0],C,B)!==false);return this}})})(jQuery);(function(V,L){"use strict";if(window.Select2!==L)return;var D,i,c,d,$,A,Y,H,W,D={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function($){$=$.which?$.which:$;switch($){case D.LEFT:case D.RIGHT:case D.UP:case D.DOWN:return true}return false},isControl:function($){var _=$.which;switch(_){case D.SHIFT:case D.CTRL:case D.ALT:return true}if($.metaKey)return true;return false},isFunctionKey:function($){$=$.which?$.which:$;return $>=112&&$<=123}},a="<div class='select2-measure-scrollbar'></div>";H=V(document);$=(function(){var $=1;return function(){return $++}}());function E($,B){var A=0,_=B.length;for(;A<_;A=A+1)if(Z($,B[A]))return A;return-1}function R(){var _=V(a);_.appendTo("body");var $={width:_.width()-_[0].clientWidth,height:_.height()-_[0].clientHeight};_.remove();return $}function Z(_,$){if(_===$)return true;if(_===L||$===L)return false;if(_===null||$===null)return false;if(_.constructor===String)return _+""===$+"";if($.constructor===String)return $+""===_+"";return false}function K(_,B){var $,C,A;if(_===null||_.length<1)return[];$=_.split(B);for(C=0,A=$.length;C<A;C=C+1)$[C]=V.trim($[C]);return $}function S($){return $.outerWidth(false)-$.width()}function e($){var _="keyup-change-value";$.on("keydown",function(){if(V.data($,_)===L)V.data($,_,$.val())});$.on("keyup",function(){var A=V.data($,_);if(A!==L&&$.val()!==A){V.removeData($,_);$.trigger("keyup-change")}})}H.on("mousemove",function($){Y={x:$.pageX,y:$.pageY}});function C($){$.on("mousemove",function($){var _=Y;if(_===L||_.x!==$.pageX||_.y!==$.pageY)V($.target).trigger("mousemove-filtered",$)})}function b(B,_,$){$=$||L;var A;return function(){var C=arguments;window.clearTimeout(A);A=window.setTimeout(function(){_.apply($,C)},B)}}function N(A){var _=false,$;return function(){if(_===false){$=A();_=true}return $}}function B(A,$){var _=b(A,function(_){$.trigger("scroll-debounced",_)});$.on("scroll",function(A){if(E(A.target,$.get())>=0)_(A)})}function Q($){if($[0]===document.activeElement)return;window.setTimeout(function(){var A=$[0],B=$.val().length,_;$.focus();if($.is(":visible")&&A===document.activeElement)if(A.setSelectionRange)A.setSelectionRange(B,B);else if(A.createTextRange){_=A.createTextRange();_.collapse(false);_.select()}},0)}function P($){$=V($)[0];var A=0,_=0;if("selectionStart"in $){A=$.selectionStart;_=$.selectionEnd-A}else if("selection"in document){$.focus();var B=document.selection.createRange();_=document.selection.createRange().text.length;B.moveStart("character",-$.value.length);A=B.text.length-_}return{offset:A,length:_}}function J($){$.preventDefault();$.stopPropagation()}function G($){$.preventDefault();$.stopImmediatePropagation()}function F($){if(!A){var _=$[0].currentStyle||window.getComputedStyle($[0],null);A=V(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:_.fontSize,fontFamily:_.fontFamily,fontStyle:_.fontStyle,fontWeight:_.fontWeight,letterSpacing:_.letterSpacing,textTransform:_.textTransform,whiteSpace:"nowrap"});A.attr("class","select2-sizer");V("body").append(A)}A.text($.val());return A.width()}function O(A,C,D){var $,B=[],_;$=A.attr("class");if($){$=""+$;V($.split(" ")).each2(function(){if(this.indexOf("select2-")===0)B.push(this)})}$=C.attr("class");if($){$=""+$;V($.split(" ")).each2(function(){if(this.indexOf("select2-")!==0){_=D(this);if(_)B.push(this)}})}A.attr("class",B.join(" "))}function U(A,C,_,$){var D=A.toUpperCase().indexOf(C.toUpperCase()),B=C.length;if(D<0){_.push($(A));return}_.push($(A.substring(0,D)));_.push("<span class='select2-match'>");_.push($(A.substring(D,D+B)));_.push("</span>");_.push($(A.substring(D+B,A.length)))}function M(E){var C,_=0,D=null,B=E.quietMillis||100,$=E.url,A=this;return function(F){window.clearTimeout(C);C=window.setTimeout(function(){_+=1;var I=_,G=E.data,J=$,C=E.transport||V.fn.select2.ajaxDefaults.transport,B={type:E.type||"GET",cache:E.cache||false,jsonpCallback:E.jsonpCallback||L,dataType:E.dataType||"json"},H=V.extend({},V.fn.select2.ajaxDefaults.params,B);G=G?G.call(A,F.term,F.page,F.context):null;J=(typeof J==="function")?J.call(A,F.term,F.page,F.context):J;if(null!==D)D.abort();if(E.params)if(V.isFunction(E.params))V.extend(H,E.params.call(A));else V.extend(H,E.params);V.extend(H,{url:J,dataType:E.dataType,data:G,success:function(A){if(I<_)return;var $=E.results(A,F.page);F.callback($)}});D=C.call(A,H)},B)}}function f(D){var A=D,_,B,$=function($){return""+$.text};if(V.isArray(A)){B=A;A={results:B}}if(V.isFunction(A)===false){B=A;A=function(){return B}}var C=A();if(C.text){$=C.text;if(!V.isFunction($)){_=C.text;$=function($){return $[_]}}}return function(D){var C=D.term,B={results:[]},_;if(C===""){D.callback(A());return}_=function(F,B){var E,A;F=F[0];if(F.children){E={};for(A in F)if(F.hasOwnProperty(A))E[A]=F[A];E.children=[];V(F.children).each2(function(A,$){_($,E.children)});if(E.children.length||D.matcher(C,$(E),F))B.push(E)}else if(D.matcher(C,$(F),F))B.push(F)};V(A().results).each2(function(A,$){_($,B.results)});D.callback(B)}}function T($){var _=V.isFunction($);return function(C){var B=C.term,A={results:[]};V(_?$():$).each(function(){var _=this.text!==L,$=_?this.text:this;if(B===""||C.matcher(B,$))A.results.push(_?this:{id:this,text:this})});C.callback(A)}}function X($,_){if(V.isFunction($))return true;if(!$)return false;throw new Error("formatterName must be a function or a falsy value")}function _($){return V.isFunction($)?$():$}function h(_){var $=0;V.each(_,function(A,_){if(_.children)$+=h(_.children);else $++});return $}function I(A,G,I,$){var C=A,E=false,B,_,H,D,F;if(!$.createSearchChoice||!$.tokenSeparators||$.tokenSeparators.length<1)return L;while(true){_=-1;for(H=0,D=$.tokenSeparators.length;H<D;H++){F=$.tokenSeparators[H];_=A.indexOf(F);if(_>=0)break}if(_<0)break;B=A.substring(0,_);A=A.substring(_+F.length);if(B.length>0){B=$.createSearchChoice(B,G);if(B!==L&&B!==null&&$.id(B)!==L&&$.id(B)!==null){E=false;for(H=0,D=G.length;H<D;H++)if(Z($.id(B),$.id(G[H]))){E=true;break}if(!E)I(B)}}}if(C!==A)return A}function g(A,$){var _=function(){};_.prototype=new A;_.prototype.constructor=_;_.prototype.parent=A.prototype;_.prototype=V.extend(_.prototype,$);return _}i=g(Object,{bind:function(_){var $=this;return function(){_.apply($,arguments)}},init:function(A){var D,E,F=".select2-results",H,G;this.opts=A=this.prepareOpts(A);this.id=A.id;if(A.element.data("select2")!==L&&A.element.data("select2")!==null)this.destroy();this.container=this.createContainer();this.containerId="s2id_"+(A.element.attr("id")||"autogen"+$());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.body=N(function(){return A.element.closest("body")});O(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.css(_(A.containerCss));this.container.addClass(_(A.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(_(A.dropdownCssClass));this.dropdown.data("select2",this);this.results=D=this.container.find(F);this.search=E=this.container.find("input.select2-input");this.resultsPage=0;this.context=null;this.initContainer();C(this.results);this.dropdown.on("mousemove-filtered touchstart touchmove touchend",F,this.bind(this.highlightUnderEvent));B(80,this.results);this.dropdown.on("scroll-debounced",F,this.bind(this.loadMoreIfNeeded));V(this.container).on("change",".select2-input",function($){$.stopPropagation()});V(this.dropdown).on("change",".select2-input",function($){$.stopPropagation()});if(V.fn.mousewheel)D.mousewheel(function(_,A,B,C){var E=D.scrollTop(),$;if(C>0&&E-C<=0){D.scrollTop(0);J(_)}else if(C<0&&D.get(0).scrollHeight-D.scrollTop()+C<=D.height()){D.scrollTop(D.get(0).scrollHeight-D.height());J(_)}});e(E);E.on("keyup-change input paste",this.bind(this.updateResults));E.on("focus",function(){E.addClass("select2-focused")});E.on("blur",function(){E.removeClass("select2-focused")});this.dropdown.on("mouseup",F,this.bind(function($){if(V($.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent($);this.selectHighlighted($)}}));this.dropdown.on("click mouseup mousedown",function($){return false});if(V.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(A.maximumInputLength!==null)this.search.attr("maxlength",A.maximumInputLength);H=A.element.prop("disabled");if(H===L)H=false;this.enable(!H);G=A.element.prop("readonly");if(G===L)G=false;this.readonly(G);W=W||R();this.autofocus=A.element.prop("autofocus");A.element.prop("autofocus",false);if(this.autofocus)this.focus();this.opts.onLoadSuccess?this.opts.onLoadSuccess():false},destroy:function(){var $=this.opts.element.data("select2");if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}if($!==L){$.container.remove();$.dropdown.remove();$.opts.element.removeClass("select2-offscreen").removeData("select2").off(".select2").attr({"tabindex":this.elementTabIndex}).prop("autofocus",this.autofocus||false).show()}},optionToData:function($){if($.is("option"))return{id:$.prop("value"),text:$.text(),element:$.get(),css:$.attr("class"),disabled:$.prop("disabled"),locked:Z($.attr("locked"),"locked")};else if($.is("optgroup"))return{text:($.attr("label")?$.attr("label"):""),children:[],element:$.get(),css:$.attr("class")}},prepareOpts:function(_){var $,B,D,A,C=this;$=_.element;if($.get(0).tagName.toLowerCase()==="select")this.select=B=_.element;if(B)V.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in _)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")});_=V.extend({},{populateResults:function(F,B,E){var D,G,A,H,$=this.opts.id;D=function(N,P,J){var K,H,B,O,Q,F,M,I,G,A;N=_.sortResults(N,P,E);for(K=0,H=N.length;K<H;K=K+1){B=N[K];if(B.text=="-"){Q=true;B.id=B.text}else Q=(B.disabled===true);O=(!Q)&&($(B)!==L);F=B.children&&B.children.length>0;M=V("<li></li>");M.addClass("select2-results-dept-"+J);M.addClass("select2-result");M.addClass(O?"select2-result-selectable":"select2-result-unselectable");if(Q)M.addClass("select2-disabled");if(F)M.addClass("select2-result-with-children");M.addClass(C.opts.formatResultCssClass(B));I=V(document.createElement("div"));I.addClass((B.text=="-")?"select2-result-label select2-line-label":"select2-result-label");A=_.formatResult(B,I,E,C.opts.escapeMarkup);if(A!==L)I.html(A);M.append(I);if(F){G=V("<ul></ul>");G.addClass("select2-result-sub");D(B.children,G,J+1);M.append(G)}M.data("select2-data",B);P.append(M)}};D(B,F,0)}},V.fn.select2.defaults,_);if(typeof(_.id)!=="function"){D=_.id;_.id=function($){return $[D]}}if(V.isArray(_.element.data("select2Tags"))){if("tags"in _)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+_.element.attr("id");_.tags=_.element.data("select2Tags")}if(B){_.query=this.bind(function(B){var E={results:[],more:false},A=B.term,F,D,_;_=function($,D){var E;if($.is("option")){if(B.matcher(A,$.text(),$))D.push(C.optionToData($))}else if($.is("optgroup")){E=C.optionToData($);$.children().each2(function(A,$){_($,E.children)});if(E.children.length>0)D.push(E)}};F=$.children();if(this.getPlaceholder()!==L&&F.length>0){D=F[0];if(V(D).text()==="")F=F.not(D)}V.each(F,function(A,_){var $=V(_).attr("class");if($&&V(_).is("optgroup"))V(_).find("option").addClass($)});F.each2(function(A,$){_($,E.results)});B.callback(E)});_.id=function($){if($)return $.id};_.formatResultCssClass=function($){return $.css}}else if(!("query"in _))if("ajax"in _){A=_.element.data("ajax-url");if(A&&A.length>0)_.ajax.url=A;_.query=M.call(_.element,_.ajax)}else if("data"in _)_.query=f(_.data);else if("tags"in _){_.query=T(_.tags);if(_.createSearchChoice===L)_.createSearchChoice=function($){return{id:$,text:$}};if(_.initSelection===L)_.initSelection=function($,B){var A=[];V(K($.val(),_.separator)).each(function(){var B=this,C=this,$=_.tags;if(V.isFunction($))$=$();V($).each(function(){if(Z(this.id,B)){C=this.text;return false}});A.push({id:B,text:C})});B(A)}}if(typeof(_.query)!=="function")throw"query function not defined for Select2 "+_.element.attr("id");return _},monitorSource:function(){var $=this.opts.element,A;$.on("change.select2",this.bind(function($){if(this.opts.element.data("select2-change-triggered")!==true)this.initSelection()}));A=this.bind(function(){var A,C,B=this,D=$.prop("disabled");if(D===L)D=false;this.enable(!D);C=$.prop("readonly");if(C===L)C=false;this.readonly(C);O(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(_(this.opts.containerCssClass));O(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(_(this.opts.dropdownCssClass))});$.on("propertychange.select2 DOMAttrModified.select2",A);if(this.mutationCallback===L)this.mutationCallback=function($){$.forEach(A)};if(typeof WebKitMutationObserver!=="undefined"){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}this.propertyObserver=new WebKitMutationObserver(this.mutationCallback);this.propertyObserver.observe($.get(0),{attributes:true,subtree:false})}},triggerSelect:function(_){var $=V.Event("select2-selecting",{val:this.id(_),object:_});this.opts.element.trigger($);return!$.isDefaultPrevented()},triggerChange:function($){$=$||{};$=V.extend({},$,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger($);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange)this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===true},enableInterface:function(){var $=this._enabled&&!this._readonly,_=!$;if($===this.enabledInterface)return false;this.container.toggleClass("select2-container-disabled",_);this.close();this.enabledInterface=$;return true},enable:function($){if($===L)$=true;if(this._enabled===$)return false;this._enabled=$;this.opts.element.prop("disabled",!$);this.enableInterface();return true},readonly:function($){if($===L)$=false;if(this._readonly===$)return false;this._readonly=$;this.opts.element.prop("readonly",$);this.enableInterface();return true},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var D=this.dropdown,N=this.container.offset(),I=this.container.outerHeight(false),C=this.container.outerWidth(false),B=D.outerHeight(false),J=V(window).scrollLeft()+V(window).width(),G=V(window).scrollTop()+V(window).height(),L=N.top+I,$=N.left,A=L+B<=G,H=(N.top-B)>=this.body().scrollTop(),Q=D.outerWidth(false),E=$+Q<=J,F=D.hasClass("select2-drop-above"),K,M,P,O;if(this.opts.dropdownAutoWidth){O=V(".select2-results",D)[0];D.addClass("select2-drop-auto-width");D.css("width","");Q=D.outerWidth(false)+(O.scrollHeight===O.clientHeight?0:W.width);Q>C?C=Q:Q=C;E=$+Q<=J}else this.container.removeClass("select2-drop-auto-width");if(this.body().css("position")!=="static"){K=this.body().offset();L-=K.top;$-=K.left}if(F){M=true;if(!H&&A)M=false}else{M=false;if(!A&&H)M=true}if(!E)$=N.left+C-Q;if(M){L=N.top-B;this.container.addClass("select2-drop-above");D.addClass("select2-drop-above")}else{this.container.removeClass("select2-drop-above");D.removeClass("select2-drop-above")}P=V.extend({top:L,left:$,width:C},_(this.opts.dropdownCss));D.css(P)},shouldOpen:function(){var $;if(this.opened())return false;if(this._enabled===false||this._readonly===true)return false;$=V.Event("select2-opening");this.opts.element.trigger($);return!$.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return false;this.opening();return true},opening:function(){var D=this.containerId,B="scroll."+D,E="resize."+D,A="orientationchange."+D,C;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();if(this.dropdown[0]!==this.body().children().last()[0])this.dropdown.detach().appendTo(this.body());C=V("#select2-drop-mask");if(C.length==0){C=V(document.createElement("div"));C.attr("id","select2-drop-mask").attr("class","select2-drop-mask");C.hide();C.appendTo(this.body());C.on("mousedown touchstart",function($){var A=V("#select2-drop"),_;if(A.length>0){_=A.data("select2");if(_.opts.selectOnBlur)_.selectHighlighted({noFocus:true});_.close();$.preventDefault();$.stopPropagation()}})}if(this.dropdown.prev()[0]!==C[0])this.dropdown.before(C);V("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");C.css(_());C.show();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();var $=this;this.container.parents().add(window).each(function(){V(this).on(E+" "+B+" "+A,function(A){V("#select2-drop-mask").css(_());$.positionDropdown()})});function _(){return{width:Math.max(document.documentElement.scrollWidth,V(window).width()),height:Math.max(document.documentElement.scrollHeight,V(window).height())}}},close:function(){if(!this.opened())return;var A=this.containerId,_="scroll."+A,B="resize."+A,$="orientationchange."+A;this.container.parents().add(window).each(function(){V(this).off(_).off(B).off($)});this.clearDropdownAlignmentPreference();V("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(V.Event("select2-close"));this.container.removeClass("select2-container-active");this.container.find(".select2-input").blur()},clearSearch:function(){},getMaximumSelectionSize:function(){return _(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var B=this.results,C,_,$,D,F,E,A;_=this.highlight();if(_<0)return;if(_==0){B.scrollTop(0);return}C=this.findHighlightableChoices().find(".select2-result-label");$=V(C[_]);D=$.offset().top+$.outerHeight(true);if(_===C.length-1){A=B.find("li.select2-more-results");if(A.length>0)D=A.offset().top+A.outerHeight(true)}F=B.offset().top+B.outerHeight(true);if(D>F)B.scrollTop(B.scrollTop()+(D-F));E=$.offset().top-B.offset().top;if(E<0&&$.css("display")!="none")B.scrollTop(B.scrollTop()+E)},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(B){var A=this.findHighlightableChoices(),$=this.highlight();while($>-1&&$<A.length){$+=B;var _=V(A[$]);if(_.hasClass("select2-result-selectable")&&!_.hasClass("select2-disabled")&&!_.hasClass("select2-selected")){this.highlight($);break}}},highlight:function($){var A=this.findHighlightableChoices(),_,B;if(arguments.length===0)return E(A.filter(".select2-highlighted")[0],A.get());if($>=A.length)$=A.length-1;if($<0)$=0;this.results.find(".select2-highlighted").removeClass("select2-highlighted");_=V(A[$]);_.addClass("select2-highlighted");this.ensureHighlightVisible();B=_.data("select2-data");if(B)this.opts.element.trigger({type:"select2-highlight",val:this.id(B),choice:B})},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(_){var $=V(_.target).closest(".select2-result-selectable");if($.length>0&&!$.is(".select2-highlighted")){var A=this.findHighlightableChoices();this.highlight(A.index($))}else if($.length==0)this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var _=this.results,$=_.find("li.select2-more-results"),D,F=-1,B=this.resultsPage+1,E=this,A=this.search.val(),C=this.context;if($.length===0)return;D=$.offset().top-_.offset().top-_.height();if(D<=this.opts.loadMorePadding){$.addClass("select2-active");this.opts.query({element:this.opts.element,term:A,page:B,context:C,matcher:this.opts.matcher,callback:this.bind(function(D){if(!E.opened())return;E.opts.populateResults.call(this,_,D.results,{term:A,page:B,context:C});E.postprocessResults(D,false,false);if(D.more===true){$.detach().appendTo(_).text(E.opts.formatLoadMore(B+1));window.setTimeout(function(){E.loadMoreIfNeeded()},10)}else $.remove();E.positionDropdown();E.resultsPage=B;E.context=D.context})})}},tokenize:function(){},updateResults:function(E){var D=this.search,B=this.results,$=this.opts,F,H=this,_,C=D.val(),I=V.data(this.container,"select2-last-term");if(E!==true&&I&&Z(C,I))return;V.data(this.container,"select2-last-term",C);if(E!==true&&(this.showSearchInput===false||!this.opened()))return;function A(){B.scrollTop(0);D.removeClass("select2-active");H.positionDropdown()}function J($){B.html($);A()}var G=this.getMaximumSelectionSize();if(G>=1){F=this.data();if(V.isArray(F)&&F.length>=G&&X($.formatSelectionTooBig,"formatSelectionTooBig")){J("<li class='select2-selection-limit'>"+$.formatSelectionTooBig(G)+"</li>");return}}if(D.val().length<$.minimumInputLength){if(X($.formatInputTooShort,"formatInputTooShort"))J("<li class='select2-no-results'>"+$.formatInputTooShort(D.val(),$.minimumInputLength)+"</li>");else J("");if(E)this.showSearch?this.showSearch(true):"";return}if($.maximumInputLength&&D.val().length>$.maximumInputLength){if(X($.formatInputTooLong,"formatInputTooLong"))J("<li class='select2-no-results'>"+$.formatInputTooLong(D.val(),$.maximumInputLength)+"</li>");else J("");return}if($.formatSearching&&this.findHighlightableChoices().length===0)J("<li class='select2-searching'>"+$.formatSearching()+"</li>");D.addClass("select2-active");_=this.tokenize();if(_!=L&&_!=null)D.val(_);this.resultsPage=1;$.query({element:$.element,term:D.val(),page:this.resultsPage,context:null,matcher:$.matcher,callback:this.bind(function(C){var _;if(!this.opened()){this.search.removeClass("select2-active");return}this.context=(C.context===L)?null:C.context;if(this.opts.createSearchChoice&&D.val()!==""){_=this.opts.createSearchChoice.call(null,D.val(),C.results);if(_!==L&&_!==null&&H.id(_)!==L&&H.id(_)!==null)if(V(C.results).filter(function(){return Z(H.id(this),H.id(_))}).length===0)C.results.unshift(_)}if(C.results.length===0&&X($.formatNoMatches,"formatNoMatches")){J("<li class='select2-no-results'>"+$.formatNoMatches(D.val())+"</li>");return}B.empty();H.opts.populateResults.call(this,B,C.results,{term:D.val(),page:this.resultsPage,context:null});if(C.more===true&&X($.formatLoadMore,"formatLoadMore")){B.append("<li class='select2-more-results'>"+H.opts.escapeMarkup($.formatLoadMore(this.resultsPage))+"</li>");window.setTimeout(function(){H.loadMoreIfNeeded()},10)}this.postprocessResults(C,E);A();this.opts.element.trigger({type:"select2-loaded",data:C})})})},cancel:function(){this.close()},blur:function(){if(this.opts.selectOnBlur)this.selectHighlighted({noFocus:true});this.close();this.container.removeClass("select2-container-active");if(this.search[0]===document.activeElement)this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){Q(this.search)},selectHighlighted:function(B){var $=this.highlight(),A=this.results.find(".select2-highlighted"),_=A.closest(".select2-result").data("select2-data");if(_){this.highlight($);this.onSelect(_,B)}},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function B(){var _,A,$,C,B;if(this.opts.width==="off")return null;else if(this.opts.width==="element")return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px";else if(this.opts.width==="copy"||this.opts.width==="resolve"){_=this.opts.element.attr("style");if(_!==L){A=_.split(";");for(C=0,B=A.length;C<B;C=C+1){$=A[C].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if($!==null&&$.length>=1)return $[1]}}_=this.opts.element.css("width");if(_&&_.length>0)return _;if(this.opts.width==="resolve")return(this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px");return null}else if(V.isFunction(this.opts.width))return this.opts.width();else return this.opts.width}function _(){var _,A,$,C,B;if(this.opts.height==="off")return null;else if(this.opts.height==="element")return this.opts.element.outerHeight(false)===0?"auto":this.opts.element.outerHeight(false)+"px";else if(this.opts.height==="copy"||this.opts.height==="resolve"){_=this.opts.element.attr("style");if(_!==L){A=_.split(";");for(C=0,B=A.length;C<B;C=C+1){$=A[C].replace(/\s/g,"").match(/height:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if($!==null&&$.length>=1)return $[1]}}_=this.opts.element.css("height");if(_&&_.length>0)return _;if(this.opts.height==="resolve")return(this.opts.element.outerHeight(false)===0?"auto":this.opts.element.outerHeight(false)+"px");return null}else if(V.isFunction(this.opts.height))return this.opts.height();else return this.opts.height}var $=_.call(this);if($!==null)this.container.css("height",$);var A=B.call(this);if(A!==null)this.container.css("width",A)}});c=g(i,{createContainer:function(){var $=V(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return $},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments))this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var _,$;this.parent.opening.apply(this,arguments);if(this.showSearchInput!==false)this.search.val(this.focusser.val());this.search.focus();_=this.search.get(0);if(_.createTextRange){$=_.createTextRange();$.collapse(false);$.select()}this.focusser.prop("disabled",true).val("");this.updateResults(true);this.opts.element.trigger(V.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},focus:function(){if(this.opened())this.close();else{this.focusser.removeAttr("disabled");this.focusser.focus()}},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},initContainer:function(){var B,_=this.container,A=this.dropdown;this.showSearch(false);this.selection=B=_.find(".select2-choice");this.focusser=_.find(".select2-focusser");this.focusser.attr("id","s2id_autogen"+$());V("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function($){if(!this.isInterfaceEnabled())return;if($.which===D.PAGE_UP||$.which===D.PAGE_DOWN){J($);return}switch($.which){case D.UP:case D.DOWN:this.moveHighlight(($.which===D.UP)?-1:1);J($);return;case D.ENTER:this.selectHighlighted();J($);return;case D.TAB:this.selectHighlighted({noFocus:true});return;case D.ESC:this.cancel($);J($);return}}));this.search.on("blur",this.bind(function($){if(document.activeElement===this.body().get(0))window.setTimeout(this.bind(function(){this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function($){if(!this.isInterfaceEnabled())return;if($.which===D.TAB||D.isControl($)||D.isFunctionKey($)||$.which===D.ESC)return;if(this.opts.openOnEnter===false&&$.which===D.ENTER){J($);return}if($.which==D.DOWN||$.which==D.UP||($.which==D.ENTER&&this.opts.openOnEnter)){this.open();J($);return}if($.which==D.DELETE||$.which==D.BACKSPACE){if(this.opts.allowClear)this.clear();J($);return}}));e(this.focusser);this.focusser.on("keyup-change input",this.bind(function($){$.stopPropagation();if(this.opened())return;this.open()}));B.on("mousedown","abbr",this.bind(function($){if(!this.isInterfaceEnabled())return;this.clear();G($);this.close();this.selection.focus()}));B.on("mousedown",this.bind(function($){if(!this.container.hasClass("select2-container-active"))this.opts.element.trigger(V.Event("select2-focus"));if(this.opened())this.close();else if(this.isInterfaceEnabled())this.open();J($)}));A.on("mousedown",this.bind(function(){this.search.focus()}));B.on("focus",this.bind(function($){J($)}));this.focusser.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active"))this.opts.element.trigger(V.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");this.opts.element.trigger(V.Event("select2-blur"))}}));this.search.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active"))this.opts.element.trigger(V.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function($){var _=this.selection.data("select2-data");if(_){this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder();if($!==false){this.opts.element.trigger({type:"select2-removed",val:this.id(_),choice:_});this.triggerChange({removed:_})}}},initSelection:function(){var $;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.setPlaceholder()}else{var _=this;this.opts.initSelection.call(null,this.opts.element,function($){if($!==L&&$!==null){_.updateSelection($);_.close();_.setPlaceholder()}})}},prepareOpts:function(){var $=this.parent.prepareOpts.apply(this,arguments),_=this;if($.element.get(0).tagName.toLowerCase()==="select")$.initSelection=function($,B){var A=$.find(":selected");B(_.optionToData(A))};else if("data"in $)$.initSelection=$.initSelection||function(A,B){var _=A.val(),C=null;$.query({matcher:function(E,B,D){var A=Z(_,$.id(D));if(A)C=D;return A},callback:!V.isFunction(B)?V.noop:function(){B(C)}})};return $},getPlaceholder:function(){if(this.select)if(this.select.find("option").first().text()!=="")return L;return this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var $=this.getPlaceholder();if(this.opts.element.val()===""&&$!==L){if(this.select&&this.select.find("option:first").text()!=="")return;this.selection.find("span").html(this.opts.escapeMarkup($));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},postprocessResults:function(D,A,C){var _=0,E=this,B=true;this.findHighlightableChoices().each2(function(A,$){if(Z(E.id($.data("select2-data")),E.opts.element.val())){_=A;return false}});if(C!==false)this.highlight(_);if(A===true&&this.showSearchInput===false){var $=this.opts.minimumResultsForSearch;if($>=0)this.showSearch(h(D.results)>=$)}},showSearch:function($){this.showSearchInput=$;this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!$);this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!$);V(this.dropdown,this.container).toggleClass("select2-with-searchbox",$)},onSelect:function(_,B){if(!this.triggerSelect(_))return;var $=this.opts.element.val(),A=this.data();this.opts.element.val(this.id(_));this.updateSelection(_);this.opts.element.trigger({type:"select2-selected",val:this.id(_),choice:_});this.close();if(!B||!B.noFocus)this.selection.focus();if(!Z($,this.id(_)))this.triggerChange({added:_,removed:A})},updateSelection:function(A){var _=this.selection.find("span"),$;this.selection.data("select2-data",A);_.empty();$=this.opts.formatSelection(A,_);if($!==L)_.append(this.opts.escapeMarkup($));this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==L)this.container.addClass("select2-allowclear")},val:function(){var $,_=false,A=null,B=this,C=this.data();if(arguments.length===0)return this.opts.element.val();$=arguments[0];if(arguments.length>1)_=arguments[1];if(this.select){this.select.val($).find(":selected").each2(function(_,$){A=B.optionToData($);return false});this.updateSelection(A);this.setPlaceholder();if(_)this.triggerChange({added:A,removed:C})}else{if(this.opts.initSelection===L)throw new Error("cannot call val() if initSelection() is not defined");if(!$&&$!==0){this.clear(_);return}this.opts.element.val($);this.opts.initSelection(this.opts.element,function($){B.opts.element.val(!$?"":B.id($));B.updateSelection($);B.setPlaceholder();if(_)B.triggerChange({added:$,removed:C})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(A,$){var _;if(arguments.length===0){_=this.selection.data("select2-data");if(_==L)_=null;return _}else if(!A||A==="")this.clear($);else{_=this.data();this.opts.element.val(!A?"":this.id(A));this.updateSelection(A);if($)this.triggerChange({added:A,removed:_})}}});d=g(i,{createContainer:function(){var $=V(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return $},prepareOpts:function(){var $=this.parent.prepareOpts.apply(this,arguments),_=this;if($.element.get(0).tagName.toLowerCase()==="select")$.initSelection=function(A,C){var B=[];A.find(":selected").each2(function(A,$){B.push(_.optionToData($))});if(_.selectVal){var $=[];V.each(_.selectVal,function(A,_){V.each(B,function(C,A){if(A.id==_)$.push(B[C])})});B=$}C(B)};else if("data"in $)$.initSelection=$.initSelection||function(_,C){var B=K(_.val(),$.separator),A=[];$.query({matcher:function(E,C,D){var _=V.grep(B,function(_){return Z(_,$.id(D))}).length;if(_)A.push(D);return _},callback:!V.isFunction(C)?V.noop:function(){var D=[];for(var G=0;G<B.length;G++){var _=B[G];for(var F=0;F<A.length;F++){var E=A[F];if(Z(_,$.id(E))){D.push(E);A.splice(F,1);break}}}C(D)}})};return $},selectChoice:function(_){var $=this.container.find(".select2-search-choice-focus");if($.length&&_&&_[0]==$[0]);else{if($.length)this.opts.element.trigger("choice-deselected",$);$.removeClass("select2-search-choice-focus");if(_&&_.length){this.close();_.addClass("select2-search-choice-focus");this.opts.element.trigger("choice-selected",_)}}},initContainer:function(){var _=".select2-choices",B;this.searchContainer=this.container.find(".select2-search-field");this.selection=B=this.container.find(_);var A=this;this.selection.on("mousedown",".select2-search-choice",function($){if(A.opts.element.is("select"))return false});this.search.attr("id","s2id_autogen"+$());V("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id"));this.search.on("input paste",this.bind(function(){if(!this.isInterfaceEnabled())return;if(!this.opened())this.open()}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(_){if(!this.isInterfaceEnabled())return;++this.keydowns;var $=B.find(".select2-search-choice-focus"),F=$.prev(".select2-search-choice:not(.select2-locked)"),C=$.next(".select2-search-choice:not(.select2-locked)"),E=P(this.search);if($.length&&(_.which==D.LEFT||_.which==D.RIGHT||_.which==D.BACKSPACE||_.which==D.DELETE||_.which==D.ENTER)){var A=$;if(_.which==D.LEFT&&F.length)A=F;else if(_.which==D.RIGHT)A=C.length?C:null;else if(_.which===D.BACKSPACE){this.unselect($.first());this.search.width(10);A=F.length?F:C}else if(_.which==D.DELETE){this.unselect($.first());this.search.width(10);A=C.length?C:null}else if(_.which==D.ENTER)A=null;this.selectChoice(A);J(_);if(!A||!A.length)this.open();return}else if(((_.which===D.BACKSPACE&&this.keydowns==1)||_.which==D.LEFT)&&(E.offset==0&&!E.length)){this.selectChoice(B.find(".select2-search-choice:not(.select2-locked)").last());J(_);return}else this.selectChoice(null);if(this.opened())switch(_.which){case D.UP:case D.DOWN:this.moveHighlight((_.which===D.UP)?-1:1);J(_);return;case D.ENTER:this.selectHighlighted();J(_);return;case D.TAB:this.selectHighlighted({noFocus:true});return;case D.ESC:this.cancel(_);J(_);return}if(_.which===D.TAB||D.isControl(_)||D.isFunctionKey(_)||_.which===D.BACKSPACE||_.which===D.ESC)return;if(_.which===D.ENTER)if(this.opts.openOnEnter===false)return;else if(_.altKey||_.ctrlKey||_.shiftKey||_.metaKey)return;this.open();if(_.which===D.PAGE_UP||_.which===D.PAGE_DOWN)J(_);if(_.which===D.ENTER)J(_)}));this.search.on("keyup",this.bind(function($){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function($){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);if(!this.opened())this.clearSearch();$.stopImmediatePropagation();this.opts.element.trigger(V.Event("select2-blur"))}));this.container.on("mousedown",_,this.bind(function($){if(!this.isInterfaceEnabled())return;if(V($.target).closest(".select2-search-choice").length>0)return;this.selectChoice(null);this.clearPlaceholder();if(!this.container.hasClass("select2-container-active"))this.opts.element.trigger(V.Event("select2-focus"));this.open();this.focusSearch();$.preventDefault()}));this.container.on("focus",_,this.bind(function(){if(!this.isInterfaceEnabled())return;if(!this.container.hasClass("select2-container-active"))this.opts.element.trigger(V.Event("select2-focus"));this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments))this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var $;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var _=this;this.opts.initSelection.call(null,this.opts.element,function($){if($!==L&&$!==null){_.updateSelection($);_.close();_.clearSearch()}})}},clearSearch:function(){var $=this.getPlaceholder(),_=this.getMaxSearchWidth();if($!==L&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val($).addClass("select2-default");this.search.width(_>0?_:this.container.css("width"))}else this.search.val("").width(10)},clearPlaceholder:function(){if(this.search.hasClass("select2-default"))this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(true);this.search.focus();this.opts.element.trigger(V.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(A){var _=[],$=[],B=this;V(A).each(function(){if(E(B.id(this),_)<0){_.push(B.id(this));$.push(this)}});A=$;this.selection.find(".select2-search-choice").remove();V(A).each(function(){B.addSelectedChoice(this)});B.postprocessResults()},tokenize:function(){var $=this.search.val();$=this.opts.tokenizer($,this.data(),this.bind(this.onSelect),this.opts);if($!=null&&$!=L){this.search.val($);if($.length>0)this.open()}},onSelect:function($,_){if(!this.triggerSelect($))return;this.addSelectedChoice($);this.opts.element.trigger({type:"selected",val:this.id($),choice:$});if(this.select||!this.opts.closeOnSelect)this.postprocessResults();if(this.opts.closeOnSelect){this.close();this.search.width(10)}else if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();if(this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize())this.updateResults(true);this.positionDropdown()}else this.search.width(10);this.triggerChange({added:$});if(!_||!_.noFocus)this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(F){var E=!F.locked,A=V("<li class='select2-search-choice'>"+"    <div></div>"+"    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a>"+"</li>"),C=V("<li class='select2-search-choice select2-locked'>"+"<div></div>"+"</li>"),D=E?A:C,_=this.id(F),$=this.getVal(),B;B=this.opts.formatSelection(F,D.find("div"));if(B!=L)D.find("div").replaceWith("<div title='"+this.opts.escapeMarkup(B)+"'>"+this.opts.escapeMarkup(B)+"</div>");if(E)D.find(".select2-search-choice-close").on("mousedown",J).on("click dblclick",this.bind(function($){if(!this.isInterfaceEnabled())return;V($.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(V($.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue();J($)})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}));D.data("select2-data",F);D.insertBefore(this.searchContainer);$.push(_);this.setVal($)},unselect:function(A){var $=this.getVal(),B,_;A=A.closest(".select2-search-choice");if(A.length===0)throw"Invalid argument: "+A+". Must be .select2-search-choice";B=A.data("select2-data");if(!B)return;_=E(this.id(B),$);if(_>=0){$.splice(_,1);this.setVal($);if(this.select)this.postprocessResults()}A.remove();this.opts.element.trigger({type:"removed",val:this.id(B),choice:B});this.triggerChange({removed:B})},postprocessResults:function(D,A,C){var $=this.getVal(),B=this.results.find(".select2-result"),_=this.results.find(".select2-result-with-children"),G=this,H=G.results.find("> *");V.each(this.data(),function(A,_){if(_.css){var $=_.css.split(" ");V.each($,function(B,$){if($=="optgroupSelectable")H.filter(".optgroupSelectable").each2(function(A,$){if(_.id==G.id($.data("select2-data")))$.next("li").addClass("select2-result-hide")});var A=$.split("").reverse().join("");V.each(H,function(C,B){var $=V(B);if($.hasClass(A)&&$.hasClass("select2-result-with-children")){var _=$.prev("li");if(_.hasClass("optgroupSelectable"))_.addClass("select2-result-unselectable select2-disabled").removeClass("select2-result-selectable");V.each($.find("> ul > li"),function(_,$){V($).addClass("select2-result-unselectable select2-disabled").removeClass("select2-result-selectable")})}else if($.hasClass(A))$.addClass("select2-result-unselectable select2-disabled").removeClass("select2-result-selectable")})})}});B.each2(function(B,A){var _=G.id(A.data("select2-data"));if(E(_,$)>=0){A.addClass("select2-selected");A.find(".select2-result-selectable").addClass("select2-selected")}});_.each2(function(A,$){if($.find("> ul.select2-result-sub > li:not(.select2-selected)").length===0){$.addClass("select2-selected");var _=$.prev("li");if(_.hasClass("optgroupSelectable"))_.addClass("select2-result-hide")}else if($.find("> ul.select2-result-sub > li.select2-result-selectable").length===0)$.addClass("select2-result-unselectable select2-disabled").removeClass("select2-result-selectable")});if(this.highlight()==-1&&C!==false)G.highlight(0);if(!this.opts.createSearchChoice&&!B.filter(".select2-result:not(.select2-selected)").length>0)this.results.append("<li class='select2-no-results'>"+G.opts.formatNoMatches(G.search.val())+"</li>");var F=B.not(".select2-selected,.select2-result-hide"),I=F.last();V.each(F,function(B,_){var A=V(_).next("li");if((G.id(V(_).data("select2-data"))=="-")&&(A.length!=0)){for(var $=F.length,B=0;(A.not(".select2-selected,.select2-result-hide").length==0)&&(B<$);B++)A=A.next("li");if(G.id(A.data("select2-data"))=="-")A.addClass("select2-result-hide")}});if(G.id(I.data("select2-data"))=="-")I.addClass("select2-result-hide")},getMaxSearchWidth:function(){return this.selection.width()-S(this.search)},resizeSearch:function(){var _,C,A,D,B,$=S(this.search);_=F(this.search)+10;C=this.search.offset().left;A=this.selection.width();D=this.selection.offset().left;B=A-(C-D)-$;if(B<_)B=A-$;if(B<40)B=A-$;if(B<=0)B=_;this.search.width(B)},getVal:function(){var $;if(this.select){$=this.select.val();return $===null?[]:$}else{$=this.opts.element.val();return K($,this.opts.separator)}},setVal:function($){var _;if(this.select)this.select.val($);else{_=[];V($).each(function(){if(E(this,_)<0)_.push(this)});this.opts.element.val(_.length===0?"":_.join(this.opts.separator))}},buildChangeDetails:function($,_){var _=_.slice(0),$=$.slice(0);for(var B=0;B<_.length;B++)for(var A=0;A<$.length;A++)if(Z(this.opts.id(_[B]),this.opts.id($[A]))){_.splice(B,1);B--;$.splice(A,1);A--}return{added:_,removed:$}},val:function($,_){var C,B=this,A;if(arguments.length===0)return this.getVal();C=this.data();if(!C.length)C=[];if(!$&&$!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(_)this.triggerChange({added:this.data(),removed:C});return}this.selectVal=(typeof $=="object")?$:$.split(",").splice(0,1);this.setVal($);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection));if(_)this.triggerChange(this.buildChangeDetails(C,this.data()))}else{if(this.opts.initSelection===L)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(A){var $=V(A).map(B.id);B.setVal($);B.updateSelection(A);B.clearSearch();if(_)B.triggerChange(this.buildChangeDetails(C,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var $=[],_=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){$.push(_.opts.id(V(this).data("select2-data")))});this.setVal($);this.triggerChange()},data:function(_,B){var C=this,A,$;if(arguments.length===0)return this.selection.find(".select2-search-choice").map(function(){return V(this).data("select2-data")}).get();else{$=this.data();if(!_)_=[];A=V.map(_,function($){return C.opts.id($)});this.setVal(A);this.updateSelection(_);this.clearSearch();if(B)this.triggerChange(this.buildChangeDetails($,this.data()))}}});V.fn.select2=function(){var A=Array.prototype.slice.call(arguments,0),_,$,C,F,D=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","readonly","positionDropdown","data"],B=["val","opened","isFocused","container","data"];this.each(function(){if(A.length===0||typeof(A[0])==="object"){_=A.length===0?{}:V.extend({},A[0]);_.element=V(this);if(_.element.get(0).tagName.toLowerCase()==="select")F=_.element.prop("multiple");else{F=_.multiple||false;if("tags"in _)_.multiple=F=true}$=F?new d():new c();$.init(_)}else if(typeof(A[0])==="string"){if(E(A[0],D)<0)throw"Unknown method: "+A[0];C=L;$=V(this).data("select2");if($===L)return;if(A[0]==="container")C=$.container;else C=$[A[0]].apply($,A.slice(1));if(E(A[0],B)>=0)return false}else throw"Invalid arguments to select2 plugin: "+A});return(C===L)?this:C};V.fn.select2.defaults={width:"copy",height:"off",loadMorePadding:0,closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(_,C,B,$){var A=[];_.text=(_.text=="-")?"":_.text;U(_.text,B.term,A,$);return A.join("")},formatSelection:function(_,$){return _?_.text:L},sortResults:function($,A,_){return $},formatResultCssClass:function($){return L},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(_,$){var A=$-_.length;return"Please enter "+A+" more character"+(A==1?"":"s")},formatInputTooLong:function($,_){var A=$.length-_;return"Please delete "+A+" character"+(A==1?"":"s")},formatSelectionTooBig:function($){return"You can only select "+$+" item"+($==1?"":"s")},formatLoadMore:function($){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function($){if($)return $.id},matcher:function(_,$){return(""+$).toUpperCase().indexOf((""+_).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:I,escapeMarkup:function(_){var $={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;","/":"&#47;"};return String(_).replace(/[&<>"'\/\\]/g,function(_){return $[_]})},blurOnChange:false,selectOnBlur:false,adaptContainerCssClass:function($){return $},adaptDropdownCssClass:function($){return null}};V.fn.select2.ajaxDefaults={transport:V.ajax,params:{type:"GET",cache:false,dataType:"json"}};window.Select2={query:{ajax:M,local:f,tags:T},util:{debounce:b,markMatch:U},"class":{"abstract":i,"single":c,"multi":d}}}(jQuery))
