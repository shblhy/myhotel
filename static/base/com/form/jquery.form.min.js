;(function($){$.fn.ajaxSubmit=function(V){if(!this.length){_("ajaxSubmit: skipping submit process - no element selected");return this}var S,Q,L,I=this;if(typeof V=="function")V={success:V};S=this.attr("method");Q=this.attr("action");L=(typeof Q==="string")?$.trim(Q):"";L=L||window.location.href||"";if(L)L=(L.match(/^([^#]+)/)||[])[1];V=$.extend(true,{url:L,success:$.ajaxSettings.success,type:S||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},V);var G={};this.trigger("form-pre-serialize",[this,V,G]);if(G.veto){_("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(V.beforeSerialize&&V.beforeSerialize(this,V)===false){_("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var K=V.traditional;if(K===undefined)K=$.ajaxSettings.traditional;var R,J,M,H=this.formToArray(V.semantic);if(V.data){V.extraData=V.data;R=$.param(V.data,K)}if(V.beforeSubmit&&V.beforeSubmit(H,this,V)===false){_("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[H,this,V,G]);if(G.veto){_("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var N=$.param(H,K);if(R)N=(N?(N+"&"+R):R);if(V.type.toUpperCase()=="GET"){V.url+=(V.url.indexOf("?")>=0?"&":"?")+N;V.data=null}else V.data=N;var O=[];if(V.resetForm)O.push(function(){I.resetForm()});if(V.clearForm)O.push(function(){I.clearForm(V.includeHidden)});if(!V.dataType&&V.target){var U=V.success||function(){};O.push(function(_){var A=V.replaceTarget?"replaceWith":"html";$(V.target)[A](_).each(U,arguments)})}else if(V.success)O.push(V.success);V.success=function(C,_,B){var A=V.context||V;for(var D=0,$=O.length;D<$;D++)O[D].apply(A,[C,_,B||I,I])};var P=$("input:file:enabled[value]",this),F=P.length>0,A="multipart/form-data",E=(I.attr("enctype")==A||I.attr("encoding")==A),D=!!(F&&P.get(0).files&&window.FormData);_("fileAPI :"+D);var C=(F||E)&&!D;if(V.iframe!==false&&(V.iframe||C)){if(V.closeKeepAlive)$.get(V.closeKeepAlive,function(){T(H)});else T(H)}else if((F||E)&&D){V.progress=V.progress||$.noop;B(H)}else $.ajax(V);this.trigger("form-submit-notify",[this,V]);return this;function B(B){var _=new FormData();for(var D=0;D<B.length;D++){if(B[D].type=="file")continue;_.append(B[D].name,B[D].value)}I.find("input:file:enabled").each(function(){var B=$(this).attr("name"),A=this.files;if(B)for(var C=0;C<A.length;C++)_.append(B,A[C])});if(V.extraData)for(var C in V.extraData)_.append(C,V.extraData[C]);V.data=null;var A=V.beforeSend;V.beforeSend=function($,B){B.data=_;if($.upload)$.upload.onprogress=function($){B.progress($.position,$.total)};if(A)A.call(B,$,B)};$.ajax(V)}function T(P){var O=I[0],Z,W,Y,M,G,U,R,b,B,Q,J,K,c=!!$.fn.prop;if(P)if(c){for(W=0;W<P.length;W++){Z=$(O[P[W].name]);Z.prop("disabled",false)}}else for(W=0;W<P.length;W++){Z=$(O[P[W].name]);Z.removeAttr("disabled")}if($(":input[name=submit],:input[id=submit]",O).length){alert("Error: Form elements must not have name or id of \"submit\".");return}Y=$.extend(true,{},$.ajaxSettings,V);Y.context=Y.context||Y;G="jqFormIO"+(new Date().getTime());if(Y.iframeTarget){U=$(Y.iframeTarget);Q=U.attr("name");if(Q==null)U.attr("name",G);else G=Q}else{U=$("<iframe name=\""+G+"\" src=\""+Y.iframeSrc+"\" />");U.css({position:"absolute",top:"-1000px",left:"-1000px"})}R=U[0];b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(B){var A=(B==="timeout"?"timeout":"aborted");_("aborting upload... "+A);this.aborted=1;U.attr("src",Y.iframeSrc);b.error=A;Y.error&&Y.error.call(Y.context,b,A,B);M&&$.event.trigger("ajaxError",[b,Y,A]);Y.complete&&Y.complete.call(Y.context,b,A)}};M=Y.global;if(M&&!$.active++)$.event.trigger("ajaxStart");if(M)$.event.trigger("ajaxSend",[b,Y]);if(Y.beforeSend&&Y.beforeSend.call(Y.context,b,Y)===false){if(Y.global)$.active--;return}if(b.aborted)return;B=O.clk;if(B){Q=B.name;if(Q&&!B.disabled){Y.extraData=Y.extraData||{};Y.extraData[Q]=B.value;if(B.type=="image"){Y.extraData[Q+".x"]=O.clk_x;Y.extraData[Q+".y"]=O.clk_y}}}var f=1,T=2;function E($){var _=$.contentWindow?$.contentWindow.document:$.contentDocument?$.contentDocument:$.document;return _}var F=$("meta[name=csrf-token]").attr("content"),H=$("meta[name=csrf-param]").attr("content");if(H&&F){Y.extraData=Y.extraData||{};Y.extraData[H]=F}function X(){var C=I.attr("target"),D=I.attr("action");O.setAttribute("target",G);if(!S)O.setAttribute("method","POST");if(D!=Y.url)O.setAttribute("action",Y.url);if(!Y.skipEncodingOverride&&(!S||/post/i.test(S)))I.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});if(Y.timeout)K=setTimeout(function(){J=true;A(f)},Y.timeout);function H(){try{var B=E(R).readyState;_("state = "+B);if(B.toLowerCase()=="uninitialized")setTimeout(H,50)}catch($){_("Server abort: ",$," (",$.name,")");A(T);K&&clearTimeout(K);K=undefined}}var B=[];try{if(Y.extraData)for(var F in Y.extraData)B.push($("<input type=\"hidden\" name=\""+F+"\">").attr("value",Y.extraData[F]).appendTo(O)[0]);if(!Y.iframeTarget){U.appendTo("body");R.attachEvent?R.attachEvent("onload",A):R.addEventListener("load",A,false)}setTimeout(H,15);O.submit()}finally{O.setAttribute("action",D);if(C)O.setAttribute("target",C);else I.removeAttr("target");$(B).remove()}}if(Y.forceSync)X();else setTimeout(X,10);var C,d,L=50,e;function A(H){if(b.aborted||e)return;try{d=E(R)}catch(F){_("cannot access response document: ",F);H=T}if(H===f&&b){b.abort("timeout");return}else if(H==T&&b){b.abort("server abort");return}if(!d||d.location.href==Y.iframeSrc)if(!J)return;R.detachEvent?R.detachEvent("onload",A):R.removeEventListener("load",A,false);var N="success",S;try{if(J)throw"timeout";var V=Y.dataType=="xml"||d.XMLDocument||$.isXMLDoc(d);_("isXml="+V);if(!V&&window.opera&&(d.body==null||d.body.innerHTML==""))if(--L){_("requeing onLoad callback, DOM not available");setTimeout(A,250);return}var Q=d.body?d.body:d.documentElement;b.responseText=Q?Q.innerHTML:null;b.responseXML=d.XMLDocument?d.XMLDocument:d;if(V)Y.dataType="xml";b.getResponseHeader=function(_){var $={"content-type":Y.dataType};return $[_]};if(Q){b.status=Number(Q.getAttribute("status"))||b.status;b.statusText=Q.getAttribute("statusText")||b.statusText}var B=(Y.dataType||"").toLowerCase(),G=/(json|script|text)/.test(B);if(G||Y.textarea){var P=d.getElementsByTagName("textarea")[0];if(P){b.responseText=P.value;b.status=Number(P.getAttribute("status"))||b.status;b.statusText=P.getAttribute("statusText")||b.statusText}else if(G){var O=d.getElementsByTagName("pre")[0],I=d.getElementsByTagName("body")[0];if(O)b.responseText=O.textContent?O.textContent:O.innerText;else if(I)b.responseText=I.textContent?I.textContent:I.innerText}}else if(B=="xml"&&!b.responseXML&&b.responseText!=null)b.responseXML=D(b.responseText);try{C=a(b,B,Y)}catch(H){N="parsererror";b.error=S=(H||N)}}catch(H){_("error caught: ",H);N="error";b.error=S=(H||N)}if(b.aborted){_("upload aborted");N=null}if(b.status)N=(b.status>=200&&b.status<300||b.status===304)?"success":"error";if(N==="success"){Y.success&&Y.success.call(Y.context,C,"success",b);M&&$.event.trigger("ajaxSuccess",[b,Y])}else if(N){if(S==undefined)S=b.statusText;Y.error&&Y.error.call(Y.context,b,N,S);M&&$.event.trigger("ajaxError",[b,Y,S])}M&&$.event.trigger("ajaxComplete",[b,Y]);if(M&&!--$.active)$.event.trigger("ajaxStop");Y.complete&&Y.complete.call(Y.context,b,N);e=true;if(Y.timeout)clearTimeout(K);setTimeout(function(){if(!Y.iframeTarget)U.remove();b.responseXML=null},100)}var D=$.parseXML||function($,_){if(window.ActiveXObject){_=new ActiveXObject("Microsoft.XMLDOM");_.async="false";_.loadXML($)}else _=(new DOMParser()).parseFromString($,"text/xml");return(_&&_.documentElement&&_.documentElement.nodeName!="parsererror")?_:null},N=$.parseJSON||function($){return window["eval"]("("+$+")")},a=function(B,D,_){var E=B.getResponseHeader("content-type")||"",C=D==="xml"||!D&&E.indexOf("xml")>=0,A=C?B.responseXML:B.responseText;if(C&&A.documentElement.nodeName==="parsererror")$.error&&$.error("parsererror");if(_&&_.dataFilter)A=_.dataFilter(A,D);if(typeof A==="string")if(D==="json"||!D&&E.indexOf("json")>=0)A=N(A);else if(D==="script"||!D&&E.indexOf("javascript")>=0)$.globalEval(A);return A}}};$.fn.ajaxForm=function(B){if(this.length===0){var A={s:this.selector,c:this.context};if(!$.isReady&&A.s){_("DOM not ready, queuing ajaxForm");$(function(){$(A.s,A.c).ajaxForm(B)});return this}_("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(_){if(!_.isDefaultPrevented()){_.preventDefault();$(this).ajaxSubmit(B)}}).bind("click.form-plugin",function(A){var C=A.target,D=$(C);if(!(D.is(":submit,input:image"))){var _=D.closest(":submit");if(_.length==0)return;C=_[0]}var B=this;B.clk=C;if(C.type=="image")if(A.offsetX!=undefined){B.clk_x=A.offsetX;B.clk_y=A.offsetY}else if(typeof $.fn.offset=="function"){var E=D.offset();B.clk_x=A.pageX-E.left;B.clk_y=A.pageY-E.top}else{B.clk_x=A.pageX-C.offsetLeft;B.clk_y=A.pageY-C.offsetTop}setTimeout(function(){B.clk=B.clk_x=B.clk_y=null},100)})};$.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};$.fn.formToArray=function(H){var F=[];if(this.length===0)return F;var E=this[0],K=H?E.getElementsByTagName("*"):E.elements;if(!K)return F;var L,I,G,A,D,C,_;for(L=0,C=K.length;L<C;L++){D=K[L];G=D.name;if(!G)continue;if(H&&E.clk&&D.type=="image"){if(!D.disabled&&E.clk==D){F.push({name:G,value:$(D).val(),type:D.type});F.push({name:G+".x",value:E.clk_x},{name:G+".y",value:E.clk_y})}continue}A=$.fieldValue(D,true);if(A&&A.constructor==Array){for(I=0,_=A.length;I<_;I++)F.push({name:G,value:A[I]})}else if(A!==null&&typeof A!="undefined")F.push({name:G,value:A,type:D.type})}if(!H&&E.clk){var J=$(E.clk),B=J[0];G=B.name;if(G&&!B.disabled&&B.type=="image"){F.push({name:G,value:J.val()});F.push({name:G+".x",value:E.clk_x},{name:G+".y",value:E.clk_y})}}return F};$.fn.formSerialize=function(_){return $.param(this.formToArray(_))};$.fn.fieldSerialize=function(A){var _=[];this.each(function(){var D=this.name;if(!D)return;var B=$.fieldValue(this,A);if(B&&B.constructor==Array){for(var E=0,C=B.length;E<C;E++)_.push({name:D,value:B[E]})}else if(B!==null&&typeof B!="undefined")_.push({name:this.name,value:B})});return $.param(_)};$.fn.fieldValue=function(D){for(var _=[],E=0,B=this.length;E<B;E++){var C=this[E],A=$.fieldValue(C,D);if(A===null||typeof A=="undefined"||(A.constructor==Array&&!A.length))continue;A.constructor==Array?$.merge(_,A):_.push(A)}return _};$.fieldValue=function(J,K){var F=J.name,I=J.type,C=J.tagName.toLowerCase();if(K===undefined)K=true;if(K&&(!F||J.disabled||I=="reset"||I=="button"||(I=="checkbox"||I=="radio")&&!J.checked||(I=="submit"||I=="image")&&J.form&&J.form.clk!=J||C=="select"&&J.selectedIndex==-1))return null;if(C=="select"){var _=J.selectedIndex;if(_<0)return null;var D=[],L=J.options,E=(I=="select-one"),A=(E?_+1:L.length);for(var G=(E?_:0);G<A;G++){var B=L[G];if(B.selected){var H=B.value;if(!H)H=(B.attributes&&B.attributes["value"]&&!(B.attributes["value"].specified))?B.text:B.value;if(E)return H;D.push(H)}}return D}return $(J).val()};$.fn.clearForm=function(_){return this.each(function(){$("input,select,textarea",this).clearFields(_)})};$.fn.clearFields=$.fn.clearInputs=function($){var _=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var A=this.type,B=this.tagName.toLowerCase();if(_.test(A)||B=="textarea"||($&&/hidden/.test(A)))this.value="";else if(A=="checkbox"||A=="radio")this.checked=false;else if(B=="select")this.selectedIndex=-1})};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType))this.reset()})};$.fn.enable=function($){if($===undefined)$=true;return this.each(function(){this.disabled=!$})};$.fn.selected=function(_){if(_===undefined)_=true;return this.each(function(){var A=this.type;if(A=="checkbox"||A=="radio")this.checked=_;else if(this.tagName.toLowerCase()=="option"){var B=$(this).parent("select");if(_&&B[0]&&B[0].type=="select-one")B.find("option").selected(false);this.selected=_}})};$.fn.ajaxSubmit.debug=false;function _(){if(!$.fn.ajaxSubmit.debug)return;var _="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log)window.console.log(_);else if(window.opera&&window.opera.postError)window.opera.postError(_)}})(jQuery)